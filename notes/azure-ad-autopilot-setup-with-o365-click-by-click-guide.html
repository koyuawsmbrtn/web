<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>koyu's personal website - notes</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/components/principles.css">
    <link rel="stylesheet" href="/assets/css/components/avatars.css">
    <link rel="stylesheet" href="/assets/css/components/social.css">
    <link rel="stylesheet" href="/assets/css/layout/blog.css">
    <link rel="shortcut icon" href="/assets/img/icon.webp">
</head>

<body>
    <noscript>
        <style>
            body {
                overflow: hidden;
            }
        </style>
        <div class="noscript-warning">
            <h1>JavaScript is disabled</h1>
            <p>
                This website requires JavaScript to function properly. Please enable JavaScript in your browser
                settings.
            </p>
            <p>
                If you are using a browser that does not support JavaScript, please consider switching to a modern
                browser
                that does.
            </p>
        </div>
    </noscript>
    <div id="social"></div>
    <div id="container">
        <div id="render-header"></div>
        <main>
            <div class="breadcrumbs">
                <a href="/notes">Notes</a>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="icon size-4">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5" />
                </svg>
                <span>Azure AD Autopilot Setup with O365 ‚Äî Click-by-Click Guide</span>
            </div>
            <article>
                <h1>Azure AD Autopilot Setup with O365 ‚Äî Click-by-Click Guide</h1>
                <p>This guide sets up a system where users log in with their O365 account and are immediately
                    provisioned with the correct apps, licenses, and group policies. Designed for new device
                    provisioning and ongoing scaling.</p>
                <h2>‚öôÔ∏è Prerequisites (one-time setup)</h2>
                <ul>
                    <li>Admin access to Microsoft 365 Admin Center</li>
                    <li>Admin access to Microsoft Intune (Microsoft Endpoint Manager)</li>
                    <li>Azure AD Premium P1/P2 license (recommended)</li>
                    <li>Windows 10/11 Pro or Enterprise</li>
                    <li>Devices must support TPM 2.0 and UEFI</li>
                </ul>
                <h2>1. Configure Azure AD and Intune MDM Authority (one-time setup)</h2>
                <ol>
                    <li>Sign in to <a href="https://endpoint.microsoft.com/">Microsoft Endpoint Manager admin
                            center</a>.</li>
                    <li>Go to Devices &gt; Enroll devices &gt; Automatic Enrollment.</li>
                    <li>Under MDM user scope, set to All.</li>
                    <li>Click Save.</li>
                </ol>
                <h2>2. Create a Device Group for Autopilot Devices (one-time setup)</h2>
                <ol>
                    <li>Go to <a href="https://entra.microsoft.com/">Microsoft Entra admin center</a>.</li>
                    <li>Navigate to Groups &gt; New group.</li>
                    <li>Choose Security as group type.</li>
                    <li>Name: <code>Autopilot Devices</code></li>
                    <li>Membership type: Assigned (or Dynamic if you prefer
                        automation)</li>
                    <li>Click Create.</li>
                </ol>
                <h2>3. Create Deployment Profile in Autopilot (done once per deployment profile)</h2>
                <ol>
                    <li>In Microsoft Endpoint Manager: Devices &gt; Windows &gt; Windows enrollment &gt;
                            Deployment Profiles.</li>
                    <li>Click + Create profile &gt; Windows PC.</li>
                    <li>Set profile name: e.g., <code>Standard User Autopilot</code>.</li>
                    <li>Set Convert all targeted devices to Autopilot: Yes.</li>
                </ol>
                <blockquote>‚ö†Ô∏è Note: Enabling this setting does not wipe the device or
                    change ownership, but it will register the device in Autopilot. This enables automated provisioning
                    and management, and may affect the device experience during next OOBE (Out-Of-Box Experience). User
                    data is preserved if the OS is not reset.</blockquote>
                <ol>
                    <li>User-driven or Self-deploying based on your use case.</li>
                    <li>Skip privacy settings, EULA, etc., if desired.</li>
                    <li>Assign the profile to your <code>Autopilot Devices</code> group.</li>
                    <li>Click Create.</li>
                </ol>
                <h2>4. Import Devices to Autopilot (each time new devices are added)</h2>
                <h3>A. Using PowerShell on new device:</h3>
                <p>Run this script:</p>
                <p><code>md c:\HWID<br />Set-Location c:\HWID<br />Set-ExecutionPolicy -Scope Process -ExecutionPolicy Unrestricted<br />Install-Script -Name Get-WindowsAutoPilotInfo<br />Get-WindowsAutoPilotInfo.ps1 -OutputFile AutoPilotHWID.csv</code>
                </p>
                <p>Upload the <code>.csv</code> to <a
                        href="https://endpoint.microsoft.com/#blade/Microsoft_Intune_Enrollment/AutopilotMenu/windowsEnrollment">Endpoint
                        Manager &gt; Devices &gt; Windows &gt; Windows enrollment &gt; Devices &gt; Import</a>.</p>
                <p>Assign the imported device to your Autopilot group.</p>
                <p>You can do this in two ways:</p>
                <ul>
                    <li>Manual assignment: Go to <a href="https://entra.microsoft.com/">Microsoft Entra
                            admin center &gt; Devices</a>, find the device, click it, and use Groups &gt; + Add
                            membership to assign it to the <code>Autopilot Devices</code> group.</li>
                    <li>Tag-based (Dynamic group): If your Autopilot group uses a dynamic rule (e.g.
                        <code>device.devicePhysicalIDs -any _ -contains "[ZTDId]"</code>), then the assignment happens
                        automatically after import. Make sure your group is configured this way if you prefer
                        automation.</li>
                </ul>
                <h2>5. Assign Microsoft 365 Licenses (done per user)</h2>
                <ol>
                    <li>Go to <a href="https://admin.microsoft.com/">Microsoft 365 Admin Center</a>.</li>
                    <li>Navigate to Users &gt; Active users.</li>
                    <li>Click a user &gt; Licenses and apps.</li>
                    <li>Assign the appropriate license (e.g., Microsoft 365 E3 or Business Premium).</li>
                    <li>Click Save changes.</li>
                </ol>
                <h2>6. Create Configuration Profiles (Intune) (requires multiple profiles, reviewed as
                    needed)</h2>
                <p>Go to Devices &gt; Configuration profiles &gt; + Create profile:</p>
                <ul>
                    <li>Platform: Windows 10 and later</li>
                    <li>Profile type: Settings catalog or Templates</li>
                </ul>
                <p>Examples:</p>
                <ul>
                    <li>Device restrictions (lock down user experience)</li>
                    <li>Wi-Fi profiles</li>
                    <li>Endpoint protection</li>
                    <li>BitLocker settings</li>
                </ul>
                <p>Assign profiles to your <code>Autopilot Devices</code> group or user group.</p>
                <h2>7. Create App Assignments (update as needed per app)</h2>
                <p>Go to Apps &gt; Windows &gt; + Add:</p>
                <ul>
                    <li>Choose Win32 app or Microsoft Store app</li>
                    <li>Upload or select app</li>
                    <li>Assign app to appropriate device/user group</li>
                </ul>
                <p>Typical apps:</p>
                <ul>
                    <li>Microsoft 365 Apps for Enterprise</li>
                    <li>Teams</li>
                    <li>Company-specific tools</li>
                </ul>
                <h2>8. (Optional) Configure Conditional Access Policies (done once, refine over time)
                </h2>
                <p>Go to Microsoft Entra admin center &gt; Protection &gt; Conditional Access:</p>
                <ul>
                    <li>Create policies like:</li>
                </ul>
                <blockquote>These policies strengthen your organization&rsquo;s identity and device security posture.
                    Recommended configurations include:</blockquote>
                <ul>
                    <li>Require compliant devices: Ensures only devices that meet your Intune
                        compliance standards can access O365 resources. Ideal for regulated environments or where you
                        manage company-owned devices.</li>
                    <li>Block legacy authentication: Prevents outdated protocols (like IMAP/POP) that
                        bypass MFA. Crucial for securing accounts from password spray attacks.</li>
                    <li>Enforce MFA on unmanaged devices: Adds a second layer of security when users
                        log in from BYOD or personal systems. Good balance for hybrid or partially managed fleets.</li>
                </ul>
                <blockquote>üîÅ These policies can be refined over time based on audit logs and usage patterns.
                </blockquote>
                <ul>
                    <li>Require compliant devices</li>
                    <li>Block legacy authentication</li>
                    <li>Enforce MFA on unmanaged devices</li>
                </ul>
                <h2>‚úÖ Result</h2>
                <p>From now on:</p>
                <ul>
                    <li>A new device added via Autopilot will auto-configure upon first login with O365 credentials</li>
                    <li>Users get their apps, policies, and security enforced automatically</li>
                </ul>
                <h2>üîÑ Maintenance Notes</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Step</th>
                            <th>Repetition Frequency</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Azure AD MDM Authority</td>
                            <td>Once</td>
                        </tr>
                        <tr>
                            <td>Device Group</td>
                            <td>Once per group</td>
                        </tr>
                        <tr>
                            <td>Deployment Profile</td>
                            <td>Once per profile</td>
                        </tr>
                        <tr>
                            <td>Import Devices</td>
                            <td>Every time new devices added</td>
                        </tr>
                        <tr>
                            <td>License Assignment</td>
                            <td>Every new user</td>
                        </tr>
                        <tr>
                            <td>Config Profiles</td>
                            <td>Update as needs change</td>
                        </tr>
                        <tr>
                            <td>App Assignments</td>
                            <td>Update as apps change</td>
                        </tr>
                        <tr>
                            <td>Conditional Access</td>
                            <td>Review quarterly</td>
                        </tr>
                    </tbody>
                </table>
                <h2>üí∞ Estimated Costs &amp; Effort</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Task</th>
                            <th>Estimated Cost (USD)</th>
                            <th>Estimated Time (Hours)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Azure AD Premium P1/P2 License</td>
                            <td>$6 - $12 per user/month</td>
                            <td>N/A (subscription)</td>
                        </tr>
                        <tr>
                            <td>Microsoft 365 License</td>
                            <td>$12 - $35 per user/month</td>
                            <td>N/A (subscription)</td>
                        </tr>
                        <tr>
                            <td>Intune MDM Setup</td>
                            <td>Included in above</td>
                            <td>1 - 2 (initial configuration)</td>
                        </tr>
                        <tr>
                            <td>Device Group &amp; Profile Setup</td>
                            <td>Included in Intune</td>
                            <td>1 - 3 (one-time setup)</td>
                        </tr>
                        <tr>
                            <td>Device Import &amp; Assignment</td>
                            <td>Included in Intune</td>
                            <td>0.5 - 1 per device</td>
                        </tr>
                        <tr>
                            <td>License Assignment per user</td>
                            <td>Included in Microsoft 365</td>
                            <td>0.1 - 0.2 per user</td>
                        </tr>
                        <tr>
                            <td>Configuration Profiles &amp; Apps</td>
                            <td>Included in Intune</td>
                            <td>2 - 4 (depends on complexity)</td>
                        </tr>
                        <tr>
                            <td>Conditional Access Policies</td>
                            <td>Included in Azure AD</td>
                            <td>1 - 2 (initial creation) + ongoing review</td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <blockquote>Note: Costs vary based on licensing plans, user counts, and specific
                    organizational requirements. Time estimates assume familiarity with Microsoft 365 and Intune
                    platforms.</blockquote>
            </article>
        </main>
        <div id="render-footer"></div>
    </div>
    <script src="/assets/js/renderer.js"></script>
    <script src="/assets/js/social.js"></script>
</body>

</html>